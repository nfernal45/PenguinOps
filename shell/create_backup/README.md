# Сreate backup

Скрипт, который создаёт tar-архивы нужных нам директорий и сжимает их с помощью gz.

## Description

* Автоматическая установка
* В директории ***scripts*** расположен скрипт реализующий создание бэкапа файлов/директорий
* В директории ***systemctl*** находятся файлы, необходимые для работы скрипта в качестве сервиса и его автоматического запуска через systemd.
* После создания нового бэкапа скрипт автоматически удаляет старый, который был создан N дней назад.

Для унификации скриптов бэкапов я использую единый шаблон названия директорий хранения бэкапов ***backupName-$(date +"%Y-%m-%d")***.

# Installation

1. Клонируем проект
2. В файле ***./systemctl/temp.timer*** в строке ***OnCalendar*** устанавливаем нужное время срабатывания скрипта.
3. В файле ./install.sh по желанию меняем название скрипта в переменной ***SCRIPT_NAME***
4. При необходимости в скрипте загрузки ***./scripts/temp.sh*** меняем переменные:
    * ***CURRENT_DATE*** - текущая дата в формате "гггг-мм-дд".
    * ***BACKUP_DEST*** - директория для хранения резервных копий.
    * ***BACKUP_RETENTION_DAYS*** - количество дней, по истечении которых старые резервные копии будут удалены.
5. Запускаем скрипт установки ***install.sh***
6. Если скрипт ввыполнился без ошибок, проверяем состояние сервисов:
    * ***systemctl status ***SCRIPT_NAME.service*** - должна быть строка ***TriggeredBy: ● ***SCRIPT_NAME.timer***
    * ***systemctl status ***SCRIPT_NAME.timer*** - должна быть строка ***Active: active (waiting)***. Также проверяем время, через которое таймер должен сработать.


## ToDo

- [X] Передача исходных директории в качестве аргументов
- [ ] Возможность указывать целевую директорию в качестве аргумента.
- [ ] Добавление функции полного удаления скрипта.
